# Дизайн сравнения игроков

## Архитектура

### 1. Хранение состояния
- **Глобальное состояние** в `App.jsx`:
  ```javascript
  const [comparisonPlayers, setComparisonPlayers] = useState([]);
  ```
- Максимум игроков: 3-5 (чтобы не перегружать интерфейс)
- Структура: `[{name, position, nba_team, fantasy_team, z_scores, stats}, ...]`

### 2. Добавление игроков (Вариант 3)
- **В PlayerModal**: кнопка "Добавить к сравнению"
- Проверка: если игрок уже в списке → "Убрать из сравнения"
- Валидация: максимум 5 игроков, показывать предупреждение

### 3. Sticky панель внизу (Вариант A)
- **Условие появления**: когда `comparisonPlayers.length >= 2`
- **Расположение**: фиксированная панель внизу экрана (`position: fixed, bottom: 0`)
- **Содержимое**:
  - Список выбранных игроков (мини-карточки с именем, позицией)
  - Мини-радар (упрощенный, показывает только Total Z или основные категории)
  - Кнопка "Сравнить" → открывает модальное окно
  - Кнопка "Очистить" → очищает список

### 4. Модальное окно сравнения
- **Триггер**: кнопка "Сравнить" в sticky панели
- **Содержимое**:
  - Заголовок: "Сравнение игроков"
  - Выбор периода (как в радаре)
  - Радар-график: все игроки на одном графике (разные цвета)
  - Таблица сравнения: Z-scores и обычная статистика по категориям
  - Кнопка "Закрыть"

## Компоненты

### 1. `ComparisonBar.jsx` (Sticky панель)
```javascript
- Показывается когда comparisonPlayers.length >= 2
- Отображает список игроков
- Мини-радар или Total Z для каждого
- Кнопки: "Сравнить", "Очистить"
```

### 2. `PlayerComparisonModal.jsx` (Модальное окно)
```javascript
- Получает список игроков через props
- Загружает данные для каждого игрока за выбранный период
- Отображает радар-график (несколько радаров)
- Отображает таблицу сравнения
```

### 3. Изменения в `PlayerModal.jsx`
```javascript
- Добавить кнопку "Добавить к сравнению" / "Убрать из сравнения"
- Передать функцию добавления через props
```

### 4. Изменения в `App.jsx`
```javascript
- Состояние comparisonPlayers
- Функции: addToComparison, removeFromComparison, clearComparison
- Рендер ComparisonBar
- Рендер PlayerComparisonModal
```

## Бэкенд

### Эндпоинт: `/api/players/compare`
```python
POST /api/players/compare
Body: {
    "player_names": ["Player 1", "Player 2", "Player 3"],
    "period": "2026_total"
}

Response: {
    "players": [
        {
            "name": "Player 1",
            "position": "PG",
            "nba_team": "LAL",
            "z_scores": {...},
            "stats": {...},
            "radar_data": [...]
        },
        ...
    ]
}
```

Или можно использовать существующие эндпоинты:
- `/api/player/{name}/balance` для каждого игрока
- `/api/all-players` для получения данных всех игроков сразу

## UI/UX детали

### Sticky панель:
- Высота: ~80-100px
- Фон: белый с тенью
- Анимация появления/исчезновения
- Не перекрывает контент (добавить padding-bottom к main контенту)

### Мини-радар в панели:
- Упрощенный вид: только Total Z или 3-4 основные категории
- Или просто Total Z в виде числа

### Модальное окно сравнения:
- Ширина: max-w-6xl или max-w-7xl
- Радар: все игроки на одном графике, разные цвета
- Таблица: строки = категории, колонки = игроки
- Цветовое кодирование: зеленый/красный для Z-scores

## Логика работы

1. Пользователь открывает игрока → видит кнопку "Добавить к сравнению"
2. Кликает → игрок добавляется в список
3. Когда 2+ игрока → появляется sticky панель внизу
4. В панели видит список игроков и мини-радар
5. Кликает "Сравнить" → открывается модальное окно
6. В модальном окне видит полное сравнение: радар + таблица

## Ограничения

- Максимум 5 игроков (чтобы радар не был перегружен)
- При добавлении 6-го игрока → предупреждение "Максимум 5 игроков"
- Или автоматически убирать первого добавленного

## Альтернативные варианты

### Вариант A1: Мини-радар в панели
- Показывать упрощенный радар с 3-4 категориями
- Или только Total Z для каждого игрока

### Вариант A2: Только список в панели
- Список игроков + Total Z
- Без мини-радара (чтобы не перегружать)

### Вариант A3: Выпадающее меню
- При клике на панель → раскрывается список с деталями
- Кнопка "Сравнить" внутри выпадающего меню

